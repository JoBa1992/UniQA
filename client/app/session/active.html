<div ng-include="'components/navbar/navbar.html'"></div>
<!-- toast notifications -->
<toast></toast>
<div ng-if="isStudent()" id="lectureView">
  <div class="container">
    <div class="row" style="position:relative;">
      <div class="col-xs-12 col-sm-12-col-md-12 user-question-feed" id="questionFeed" style="height:{{lectureHeight-140 + 'px'}}; margin-top:-1.4em;position:absolute;top:0;overflow-y:scroll;overflow-x:hidden;" scroll-bottom="lecture.questions" ng-class="{'question-feed-blur': !init}">

        <h4 class="col-xs-12" style="color:#FFA700;text-align:center;margin:1em 0;">
          <strong>Welcome to
            {{lecture.title}}</strong>
        </h4>
        <div ng-repeat="item in lecture.questions">
          <span ng-if="item.asker.role=='admin' && !item.anon" class="">
            <i class="fa fa-graduation-cap text-warning pull-left" style="padding-top:.65em;"></i>
          </span>
          <h5 ng-if="!item.anon" class="" style="display:inline-block;width:94%;">
            <strong>{{item.asker.name}}:</strong>
            <span ng-click="something()">{{item.question}}</span>
          </h5>
          <h5 ng-if="item.anon" style="display:inline-block;width:94%;">
            <strong>anon:</strong>
            <span ng-click="something()">{{item.question}}</span>
          </h5>
        </div>
      </div>
    </div>

  </div>

</div>
<div ng-if="isStudent()" id="footer">
  <div class="col-xs-12 navbar-inverse navbar-fixed-bottom" style="border-top:4px solid #8DB7D2;background-color:#414C5B;">
    <div class="row" style="position:absolute;top:0;width:100%;">
      <!-- <div class="col-xs-12">

      </div> -->
      <div ng-if="showQuestionSubmit" class="col-xs-12 ask-question">
        <div class="col-xs-12" style="margin:0;padding:0;">
          <div class="form-group" style="padding:0;margin:0;position:relative;">
            <input class="form-control" ng-model="user.question" ng-disabled="sendingMsg" ng-trim="true" type="text" maxlength="140" placeholder="Add a question" ng-keyup="checkForEnterKey($event)" ng-class="{'profanity-input' : user.error, 'disabled':sendingMsg}"/>
            <i class="fa fa-refresh fa-spin" ng-show="sendingMsg" style="position:absolute;right:14px;top:10px;color:#2E3540;"></i>
          </div>
        </div>
        <div class="col-xs-12" style="margin:.6em 0 0;padding:0;">
          <div class="col-xs-4" style="padding-left:.4em;">
            <h5 class="text-warning" ng-class="{'full-input' : user.question.length >= 140}">{{user.question.length}}/140</h5>
          </div>
          <div class="col-xs-4" style="padding-right:0;">
            <button type="submit" ng-click="sendMsgAnon()" class="btn btn-warning green" style="width:100%;margin:0;" ng-class="{'disabled':sendingMsg}">
              <i class="fa fa-share"></i>
              Anon</button>
          </div>
          <div class="col-xs-4" style="padding-right:0;">
            <button type="submit" ng-click="sendMsg()" class="btn btn-success green" style="width:100%;margin:0;" ng-class="{'disabled':sendingMsg}">
              <i class="fa fa-share"></i>
              Send</button>
          </div>
        </div>

      </div>
    </div>
    <div class="row" id="bottomNav">
      <div class="col-xs-3 text-center" style="margin:1em 0;">
        <a class="student-session-foot-tab" ng-click="toggleMsgBox()" ng-class="{'active-ask' : showQuestionSubmit}">
          <i class="fa fa-comment fa-2x"></i>
          <h5 style="margin:.4em 0 0">Ask</h5>
        </a>
      </div>
      <div class="col-xs-3 text-center" style="margin:1em 0;">
        <a class="student-session-foot-tab" ng-click="showSessionContent(nextSession)" ng-class="{'active-content': false}">
          <i class="fa fa-archive fa-2x"></i>
          <h5 style="margin:.4em 0 0">Content</h5>
        </a>
      </div>
      <div class="col-xs-3 text-center" style="margin:1em 0;">
        <a class="student-session-foot-tab" ng-click="showFeedbackModal()" ng-class="{'active-feedback' : false}">
          <i class="fa fa-star fa-2x" ng-class="{'fedback' : fedback}"></i>
          <h5 style="margin:.4em 0 0">Feedback</h5>
        </a>
      </div>
      <div class="col-xs-3 text-center" style="margin:1em 0;">
        <a class="student-session-foot-tab" ng-click="checkLeave()">
          <i class="fa fa-sign-out fa-2x"></i>
          <h5 style="margin:.4em 0 0">Leave</h5>
        </a>
      </div>
    </div>
  </div>
</div>
<div ng-if="isAdmin()">
  <div class="container-full" id="lecture-fullscreen" style="margin-top:{{lectureHeightMarginTop}};background-color:#8DB7D2;">
    <div class="row" style="margin:0;padding:0;height:{{lectureHeight + 'px'}}" id="lectureView">
      <div class="hidden-xs col-sm-8 {{presViewSizeMd}} {{presViewSizeLg}} presentation-view" style="display:inline-block;padding:0;position:relative;">
        <div ng-show="!init" style="width:100%;left:50%;margin-left:-50%;text-align:center;position:absolute;height:{{lectureHeight + 'px'}};top:50%;margin-top:-{{lectureHeight/8 + 'px'}}">
          <div loading></div>
        </div>
        <a ng-click="showQrModal()" class="btn btn-warning btn-sm" style="position:absolute;top:14px;left:{{(toggleBtnPosRight)+'px'}};background-color:rgba(141, 183, 210, .8);border-color:#8DB7D2;color:white;padding:.6em 1em;">
          <h4 style="margin:0;padding:0;">
            <strong>Access:</strong>
            {{lecture.altAccess}}</h4>
        </a>
        <a ng-click="toggleFullScreen()" class="btn btn-warning btn-sm" style="position:absolute;top:14px;right:{{toggleBtnPosRight+'px'}};">
          <i class="fa {{toggleFullScreenIcon}}"></i>
        </a>
        <a ng-click="toggleSound()" class="btn btn-warning btn-sm" style="position:absolute;top:14px;right:{{(toggleBtnPosRight+40)+'px'}};">
          <i ng-if="playSound" class="glyphicon glyphicon-volume-up"></i>
          <i ng-if="!playSound" class="glyphicon glyphicon-volume-off"></i>
        </a>

        <object id="lecture" type="text/html" data="{{lecture.url}}" style="width:100%;height:{{lectureHeight + 'px'}}"></object>

        <a ng-click="toggleQuestions()" class="btn btn-warning btn-sm" style="position:absolute;bottom:14px;right:{{toggleBtnPosRight+'px'}};">
          <i class="fa {{hideQuestionIcon}}">
            <span ng-if="hideQuestions">
              <strong>{{questionIconNumber}}</strong>
            </span>
          </i>
        </a>
      </div>

      <div ng-class="{ 'hidden': hideQuestions }" class="col-xs-12 col-sm-4 col-md-3 col-lg-3 question-container" id="lectureQuestions">
        <div ng-show="!init" style="width:100%;left:50%;margin-left:-50%;text-align:center;position:absolute;height:{{lectureHeight + 'px'}};top:50%;margin-top:-{{lectureHeight/8 + 'px'}}">
          <div loading></div>
        </div>
        <div class="question-head-container">
          <div class="question-head">
            <h3>Questions</h3>
          </div>
        </div>
        <div class="question-feed" ng-class="{'question-feed-blur': !init}" style="height:{{lectureHeight-70 + 'px'}};" scroll-bottom="lecture.questions">
          <h5 style="color:#FFA700;">Welcome to
            {{lecture.title}}</h5>
          <div ng-repeat="item in lecture.questions">
            <span ng-if="item.asker.role=='admin' && !item.anon" class="">
              <i class="fa fa-graduation-cap text-warning pull-left" style="padding-top:.65em;"></i>
            </span>
            <a ng-if="!item.anon" class="" style="display:inline-block;">
              {{item.asker.name}}:
              <span ng-if="(item.time|date: 'yyyy-MM-dd') == (moment()._d| date: 'yyyy-MM-dd')" tooltip="{{item.time| date : 'HH:mm'}}" tooltip-trigger tooltip-animation="false" tooltip-placement="top" ng-click="something()">{{item.question}}</span>
              <span ng-if="(item.time|date: 'yyyy-MM-dd') != (moment()._d| date: 'yyyy-MM-dd')" tooltip="{{item.time| date : 'dd/MM/yyyy HH:mm'}}" tooltip-trigger tooltip-animation="false" tooltip-placement="top" ng-click="something()">{{item.question}}</span>
            </a>
            <a ng-if="item.anon" style="display:inline-block;">
              anon:
              <span ng-if="(item.time|date: 'yyyy-MM-dd') == (moment()._d| date: 'yyyy-MM-dd')" tooltip="{{item.time| date : 'HH:mm'}}" tooltip-trigger tooltip-animation="false" tooltip-placement="top" ng-click="something()">{{item.question}}</span>
              <span ng-if="(item.time|date: 'yyyy-MM-dd') != (moment()._d| date: 'yyyy-MM-dd')" tooltip="{{item.time| date : 'dd/MM/yyyy HH:mm'}}" tooltip-trigger tooltip-animation="false" tooltip-placement="top"></span>
            </a>
          </div>
          <div class="col-xs-12 hidden-sm hidden-md hidden-lg" style="padding-bottom:100px;"></div>
          <div class="col-xs-12 hidden-sm hidden-md hidden-lg ask-question" style="margin-left:-3%;bottom:0;">
            <div class="col-xs-12" style="margin:0;padding:0;">
              <div class="form-group" style="padding:0;margin:0;">
                <input class="form-control" ng-model="user.question" ng-trim="true" type="text" maxlength="255" placeholder="Add a question" ng-class="{'profanity-input' : user.error}"/>
              </div>
            </div>
            <div class="col-xs-12" style="margin:.6em 0 0;padding:0;">
              <div class="col-xs-6" style="padding-left:.4em;">
                <h5 class="text-warning" ng-class="{'full-input' : user.question.length >= 255}">{{user.question.length}}/255</h5>
              </div>
              <div class="col-xs-6" style="padding-right:0;">
                <button type="submit" ng-click="sendMsg()" class="btn btn-success green" style="width:100%;margin:0;">
                  <i class="fa fa-share"></i>
                  Send</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 presentation-view" style="padding:0;position:relative;">
        <h3 class="" style="padding-left:4px;">Information</h3>
        <hr class="resource-hr">

        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <i class="fa fa-quote-left"></i>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p>{{lecture.desc}}</p>
            <p></p>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:.4em;">
          <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="padding:0">
            <i class="fa fa-clock-o"></i>
            <span style="padding-left:.4em;">{{lecture.runTime}}</span>
          </div>
          <div>
            <i class="fa fa-users"></i>
            <div ng-repeat="user in lecture.collaborators" style="display:inline-block;">
              <a style="display:inline-block;" href="#">{{user}}
              </a>
              <span style="padding:0;margin:0;" ng-if="!$last">,&nbsp;</span>
            </div>
            <!-- <div style="padding-left:.4em;display:inline-block;">
              <a ng-repeat="user in lecture.collaborators" style="padding:0;margin:0;" href="#">{{user}}
                <span style="padding:0;margin:0;" ng-if="!$last">,</span>
              </a>
            </div> -->
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:1.2em;">
          <i class="fa fa-pencil-square-o"></i>
          <span ng-class="{'text-danger': ((lecture.registered.length/lecture.expected)*100 < 50), 'text-warning': ((lecture.registered.length/lecture.expected)*100 >= 50 && (lecture.registered.length/lecture.expected)*100 < 75), 'text-success': ((lecture.registered.length/lecture.expected)*100 >= 75)}" style="padding-left:.4em;">({{lecture.registered.length}}/{{lecture.expected}})
            {{(lecture.registered.length/lecture.expected)*100| number:2}}%</span>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <div ng-repeat="user in lecture.registered" style="display:inline-block;">
                <a style="color:#343D48;padding:0;margin:0;">{{user.user.name}}</a>
                <span style="padding:0;margin:0;" ng-if="!$last">,&nbsp;</span>
              </div>
              <!-- <a href="#" ng-repeat="user in lecture.registered" style="padding:0;margin:0;">{{user}}
                <span style="padding:0;margin:0;" ng-if="!$last">,</span>
              </a> -->
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="container" style="margin-top:2em;margin-bottom:3em;">
    <div class="row" style="">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 presentation-view" style="padding:0;position:relative;">
        <h3 class="" style="padding-left:4px;">Resources</h3>
        <hr class="resource-hr">
        <a ng-repeat="item in lecture.attachments" ng-click="getFile(item)" style="padding:.5em .3em .3em; margin:0 .4em;text-decoration:none;cursor:pointer;">
          <i class="fa fa-{{item.type}}-o fa-4x"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- <div class="container" style="margin-top:2em;margin-bottom:4em;">
    <div class="row" style="">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 presentation-view" style="padding:0;position:relative;">
        <h3 class="" style="padding-left:4px;">Series</h3>
        <hr class="resource-hr">
        <p>Show this lecture as apart of the entire lecture series (weeks)</p>
      </div>
    </div>
  </div> -->
</div>

<!-- FOOTER -->
<div ng-if="isAdmin()" ng-include="'components/footer/footer.html'"></div>
<!-- /FOOTER -->