<div class="top-bg md-accent-bg"></div>
<div layout="column" flex layout-padding>
  <div layout="row" layout-align="space-between center" class="content-holder">
    <div layout="column" layout-align="start start">
      <h2 class="content-page-title">Lessons</h2>
      <h6 class="content-page-sub-title">Total lessons: *</h6>
    </div>
    <div class="search" layout-align="align-start-center" layout="row" layout-align="start center" flex="50">
      <span flex></span>
      <md-input-container md-no-float class="search-bar md-block md-icon-right" flex-gt-sm="100" flex="100">
        <md-icon class="search-bar-icon">
          <i class="fa fa-search"></i>
        </md-icon>
        <input placeholder="Search" class="search-input" name="name" ng-model="module.search"/>
      </md-input-container>
    </div>
  </div>
  <button class="md-fab md-button create-fab create-fab-plus" type="button" ng-click="openCreateModal()" aria-label="Create Session">
    <i class="fa fa-plus fa-2x" aria-hidden="true"></i>
    <div class="md-ripple-container"></div>
  </button>
  <div layout="row">
    <md-content flex layout-padding class="content-container md-whiteframe-4dp, md-whiteframe-z2">
      <div ng-if="!userLessonsLoaded" class="loading-resource" loading></div>
      <div layout="column" ng-if="userLessonsLoaded && moduleLessons.length === 0" style="margin: 3em 0;">
        <h4 style="padding:4px;text-align:center;color: #CCCCCC;">
          <i class="fa fa-cubes fa-5x" aria-hidden="true"></i>
        </h4>
        <h4 style="padding:4px;text-align:center;color: #CCCCCC;">
          You don't have any lessons yet.
        </h4>
      </div>
      <h3 ng-repeat-start="(key,module) in moduleLessons" ng-if="$index === 0 || (key !== moduleLessons[$index-1].module.name)" class="lesson-mod-name">
        <strong>{{key}}</strong>
      </h3>
      <md-content ng-if="module.length > 0" ng-repeat-end class="md-padding" layout-xs="column" layout="row" style="margin-bottom:3em;display:block;" ng-cloak>
        <md-card ng-repeat="lesson in module" flex-xs="100" flex-gt-xs="30" layout="column" class="lesson-card">
          <md-card-title style="padding-top:16px;padding-right:8px;">
            <md-card-title-text>
              <span class="md-headline">
                <strong>{{lesson.title}}</strong>
              </span>
            </md-card-title-text>
            <md-button class="md-icon-button lesson-action-button lesson-favourite" aria-label="Clone">
              <i class="fa fa-star" aria-hidden="true"></i>
              <md-tooltip md-autohide="true" md-direction="top">
                Favourite
              </md-tooltip>
            </md-button>
            <md-menu md-offset="0 -5">
              <md-button aria-label="Show more options" class="md-icon-button lesson-action-button" ng-click="openMoreLessonOptions($mdOpenMenu, $event)">
                <i md-menu-origin class="fa fa-ellipsis-v" aria-hidden="true" style="font-size:1.5em;color:#82AECC;"></i>
              </md-button>
              <md-menu-content width="3" class="lesson-sub-menu notransition">
                <md-menu-item>
                  <md-button ng-click="announceClick('edit',lesson)" style="color:#202020;">
                    <i md-menu-align-target class="fa fa-file-text-o" aria-hidden="true" style="width:26px;"></i>
                    View
                  </md-button>
                </md-menu-item>
                <md-menu-item>
                  <md-button ng-click="announceClick('clone',lesson)" style="color:#202020;">
                    <i md-menu-align-target class="fa fa-clone" aria-hidden="true" style="width:26px;"></i>
                    Clone
                  </md-button>
                </md-menu-item>
                <md-menu-item>
                  <md-button ng-click="announceClick('delete',lesson)" style="color:#202020;">
                    <i md-menu-align-target class="fa fa-minus" aria-hidden="true" style="width:26px;"></i>
                    Delete
                  </md-button>
                </md-menu-item>
              </md-menu-content>
            </md-menu>
          </md-card-title>
          <md-card-content>
            <p ng-if="lesson.desc">{{lesson.desc}}</p>
            <p ng-if="!lesson.desc" class="no-desc">No description</p>
          </md-card-content>
        </md-card>
      </md-content>
    </md-content>
  </div>
</div>